/*! passme v1.0.4 xudafeng 2013-12-11 15:23:16 */
!function(a,b){"use strict";return"function"==typeof define&&define.amd?define(["exports"],b):"undefined"!=typeof exports?b(exports):(b(a.passme||(a.passme={})),void 0)}(this,function(a){function b(){}function c(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}function d(a){return this.source=a.code,this.init()}function e(){return this.hash=new Object,this.set=function(a,b){return"undefined"!=typeof a?0==this.has(a)?(this.hash[a]="undefined"==typeof b?null:b,this):!1:!1},this.remove=function(a){delete this.hash[a]},this.count=function(){var a=0;for(var b in this.hash)a++;return a},this.get=function(a){return this.hash[a]},this.has=function(a){return"undefined"!=typeof this.hash[a]},this.clear=function(){for(var a in this.hash)delete this.hash[a]},this}function f(a){var b=this;return b.source=a.code,b.tokens=new d(r),b.init()}function g(a,b){r=j.mix(q,b),j.mix(r,{code:a})}function h(a,b){g(a,b);try{return new f(r)}catch(c){throw c}}function i(a,b){g(a,b);try{return new d(r)}catch(c){throw c}}var j,k,l,m="",n="break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with|true|false|null".split("|");"class|enum|export|extends|import|super".split("|"),"implements|interface|package|private|protected|public|static|yield|let".split("|");var o=["true","false"],p=["null"],q={ecmascript:5,comment:!0,whiteSpace:!1,ranges:!1,locations:!1},r={};k={BooleanLiteral:"BooleanLiteral",Identifier:"Identifier",Keyword:"Keyword",NullLiteral:"NullLiteral",NumericLiteral:"NumericLiteral",Punctuator:"Punctuator",StringLiteral:"StringLiteral",RegularExpression:"RegularExpression",Comment:"Comment",WhiteSpace:"WhiteSpace"},b.prototype={log:function(a){console&&this.isObject(console.log)&&console.log(a)},indexOf:function(a,b){for(var c=0,d=b.length;d>c;++c)if(b[c]===a)return c;return-1},inArray:function(a,b){return this.indexOf(a,b)>-1},isIn:function(a,b){return!!~b.indexOf(a)},mix:function(a,b){for(var c in b)a[c]=b[c];return a},each:function(a,b){if(a)for(var c in a)"length"!==c&&"item"!==c&&a.hasOwnProperty(c)&&b.call(this,a[c],c);return a},isString:function(){return c("String")},isArray:function(){return c("Array")},isObject:function(){return c("Object")},isFunction:function(){return c("Function")},isUndefined:function(){return c("Undefined")}},a._=j=new b,d.prototype={init:function(){var a=this;return a.initIndex(),a.initLocations(),a.initFlags(),a.scanner(),a.tokens},initIndex:function(){var a=this;a.length=a.source.length,a.index=0},initLocations:function(){var a=this;a.line=1,a.column=-1},initFlags:function(){var a=this;a.tokens=[],a.clearFlags()},initType:function(){var a,b=this;b.isWhiteSpace()?a=k.WhiteSpace:b.isIdentifier()?a=k.Identifier:b.isRegularExpression()?a=k.RegularExpression:b.isPunctuator()?a=k.Punctuator:b.isNumericLiteral()?a=k.NumericLiteral:b.isStringLiteral()&&(a=k.StringLiteral),b.type=a,b.token+=String.fromCharCode(b.c),b.setRanges(),b.setLocations()},setLocations:function(){var a=this,b=a.locations.start?"end":"start";a.locations[b]={line:a.line,column:a.column}},setWrap:function(){var a=this;a.isWrap()&&(a.line++,a.column=-1)},clearFlags:function(){var a=this;a.token=m,a.type=null,a.ranges=[],a.locations={}},scanner:function(){var a=this;j.each(a.source,function(){a.getChar(),a.getToken()})},getChar:function(){var a=this;a.c=a.source.charCodeAt(a.index),a.index++,a.column++},end:function(){var a=this;a.index===a.length&&a.validate()},isBooleanLiteral:function(){var a=this.token;return j.isIn(a,o)},isIdentifier:function(){var a=this,b=a.c,c=!!a.token;return c?b>=97&&122>=b||b>=65&&90>=b||b>=48&&57>=b||95===b||36===b:b>=97&&122>=b||b>=65&&90>=b||95===b||36===b},isKeyword:function(){var a,b=this.token;return a=j.isIn(b[0],"bcdefinrstvw")?j.isIn(b,n)?!a:!!a:!!a},isNullLiteral:function(){var a=this.token;return j.isIn(a,p)},isNumericLiteral:function(){var a=this.c;return a>=48&&57>=a},isPunctuator:function(){var a=this,b=a.c;return j.isIn(b,[33,37,38,40,41,42,43,44,45,46,47,58,59,60,61,62,63,91,93,94,123,124,125,126])},isStringLiteral:function(){function a(){var a=c[0];if(c[c.length-1]!==a)return!0;if(c[c.length-1]===a){if(92===c[c.length-2].charCodeAt()){for(var d=0,e=0,f=!0;f;)d++,92!==c[c.length-(2+d)].charCodeAt()?f=!1:e++;return 0==e%2}return!1}return b===a.charCodeAt()&&92===c[c.length-1].charCodeAt()?!0:!1}var b=this.c,c=this.token;switch(c.length){case 0:return 39===b||34===b;case 1:var d=c[0];return!0;case 2:var d=c[0];return d!==c[c.length-1];default:return a()}},isRegularExpression:function(){function a(){for(var a=!0,b=c.tokens.length;b>=0;b--)if(c.tokens[b]&&"WhiteSpace"!==c.tokens[b].type){a="Punctuator"==c.tokens[b].type&&j.isIn(c.tokens[b].value,[";","+",",","||","&&","=","==","===","!","[","(",":","?"])||"Keyword"==c.tokens[b].type?!0:!1;break}return a}function b(a){for(var b=1,c=!1,d=0;d<a.length;d++)"["==a[d]&&("\\"!==a[d-1]||"\\"==a[d-1]&&"\\"==a[d-2])?c=!0:"]"==a[d]&&("\\"!==a[d-1]||"\\"==a[d-1]&&"\\"==a[d-2])&&(c=!1),d>0&&"/"==a[d]&&"\\"!==a[d-1]&&!c&&b++;return b}var c=this,d=c.c,e=c.token;switch(e.length){case 0:return 47===d;case 1:return 47!==d&&42!==d&&61!==d&&a();default:if(2==b(e))return!j.isIn(d,[33,37,38,40,41,42,43,44,45,46,47,58,59,60,61,62,63,91,93,123,124,125,126]);if(1==b(e))return/\\\\\//.test(e)&&!/\\\\\\\//.test(e)?!j.isIn(d,[33,37,38,40,41,42,43,44,45,46,47,58,59,60,61,62,63,91,93,123,124,125,126]):j.isIn(d,[10])&&"\\"!==e[e.length-1]?!1:!0}},isComment:function(){var a=this.c,b=this.token;switch(b.length){case 0:return 47===a;case 1:return 47===a||42===a;default:return 47===b[1].charCodeAt()?10!==a:42===b[1].charCodeAt()&&(47!==b[b.length-1].charCodeAt()||42!==b[b.length-2].charCodeAt())}},isWhiteSpace:function(){var a=this,b=this.c;return a.isWrap()||j.isIn(b,[9,11,12,13,32])},isWrap:function(){var a=this.c;return 10===a},setRanges:function(){var a=this;a.ranges.push(a.index-1)},validate:function(){var a,b=this,c=r.whiteSpace,d=r.comment,e=r.ranges,f=r.locations,g={};b.setRanges(),b.setLocations(),j.mix(g,{type:b.type,value:b.token}),e&&j.mix(g,{ranges:b.ranges}),f&&j.mix(g,{locations:b.locations}),(b.type===k.WhiteSpace&&!c||b.type===k.comment&&!d)&&(a=!0),!a&&b.tokens.push(g),b.clearFlags(),b.initType()},getToken:function(){function a(){h.isIdentifier()?h.token+=i:(h.isKeyword()&&(h.type=h.isBooleanLiteral()?k.BooleanLiteral:h.isNullLiteral()?k.NullLiteral:k.Keyword),h.validate())}function b(){h.isNumericLiteral()?h.token+=i:h.validate()}function c(){var a=h.token;j.isIn(a.charCodeAt(),[40,41,44,58,59,63,91,93,123,125])?h.validate():h.isPunctuator()?j.isIn(a,["&&","||"])?h.validate():j.isIn(a[a.length-1],["+","-","*","/","!","="])&&61!=h.c?h.validate():h.token+=i:h.validate()}function d(){h.isStringLiteral()?h.token+=i:h.validate()}function e(){h.isRegularExpression()?h.token+=i:61==h.c?(h.type=k.Punctuator,h.token+=i):h.isComment()?(h.type=k.Comment,h.token+=i):h.validate()}function f(){h.isComment()?h.token+=i:h.validate()}function g(){h.isWhiteSpace()?h.token+=i:h.validate()}var h=this,i=String.fromCharCode(h.c);switch(h.setWrap(),h.type){case null:h.initType();break;case"Identifier":a();break;case"Keyword":parseKeyword();break;case"NumericLiteral":b();break;case"Punctuator":c();break;case"StringLiteral":d();break;case"RegularExpression":e();break;case"Comment":f();break;case"WhiteSpace":g()}h.end()}},Syntax={Program:"Program",EmptyStatement:"EmptyStatement",BlockStatement:"BlockStatement",ExpressionStatement:"ExpressionStatement",IfStatement:"IfStatement",LabeledStatement:"LabeledStatement",BreakStatement:"BreakStatement",ContinueStatement:"ContinueStatement",WithStatement:"WithStatement",SwitchStatement:"SwitchStatement",ReturnStatement:"ReturnStatement",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",WhileStatement:"WhileStatement",DoWhileStatement:"DoWhileStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",LetStatement:"LetStatement",DebuggerStatement:"DebuggerStatement",FunctionDeclaration:"FunctionDeclaration",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",ThisExpression:"ThisExpression",ArrayExpression:"ArrayExpression",ObjectExpression:"ObjectExpression",FunctionExpression:"FunctionExpression",ArrowExpression:"ArrowExpression",SequenceExpression:"SequenceExpression",UnaryExpression:"UnaryExpression",BinaryExpression:"BinaryExpression",AssignmentExpression:"AssignmentExpression",UpdateExpression:"UpdateExpression",LogicalExpression:"LogicalExpression",ConditionalExpression:"ConditionalExpression",NewExpression:"NewExpression",CallExpression:"CallExpression",MemberExpression:"MemberExpression",ObjectPattern:"ObjectPattern",ArrayPattern:"ArrayPattern",SwitchCase:"SwitchCase",CatchClause:"CatchClause",Identifier:"Identifier",Literal:"Literal"},l={},f.prototype={init:function(){var a=this;return a.syntaxTree={},a.initIndex(),a.initFlags(),a.scanner(),a.syntaxTree=a.root.hash,a.syntaxTree},initIndex:function(){var a=this;a.length=a.tokens.length,a.index=0},initFlags:function(){var a=this;a.clearFlags()},clearFlags:function(){var a=this;a.syntaxTree=null,a.root=null,a.stack=[],a.swap=null,a.tempStack=[],a.type=null,a.current=null},scanner:function(){var a=this;j.each(a.tokens,function(){a.getToken(),a.router()})},getToken:function(){var a=this;a.current=a.tokens[a.index],a.pre=a.tokens[a.index-1],a.next=a.tokens[a.index+1],a.index++},stackIn:function(a){this.stack.push(a)},stackOut:function(a){a||(a=1);for(var b=0;a>b;b++)this.stack.pop()},stackTopIn:function(a){this.stack[this.stack.length-1].push(a)},router:function(){function a(){f.type=Syntax.Program,f.root=(new e).set("type",Syntax.Program).set("body",[]).set("comments",[]).set("tokens",f.tokens),f.stackIn(f.root.get("body")),f.router()}function b(){f.swap=(new e).set("type",f.type).set("declarations",[]).set("kind",f.current.value),f.stackTopIn(f.swap.hash),f.stackIn(f.swap.get("declarations")),f.tempStack=["init","id","type"],c()}function c(){switch(f.tempStack[f.tempStack.length-1]){case"type":f.swap=(new e).set("type",Syntax.VariableDeclarator),f.type=Syntax.VariableDeclarator,f.tempStack.pop();break;case"id":f.isIdentifier()?f.swap.set("id",f.current.value):f.isPunctuator()?","===f.current.value?(f.swap.set("init",null).set("type",Syntax.VariableDeclarator),f.stackTopIn(f.swap.hash),f.swap=new e):";"===f.current.value?(f.swap.set("init",null).set("type",Syntax.VariableDeclarator),f.stackTopIn(f.swap.hash),f.stackOut(),f.type=Syntax.Program):"="===f.current.value?(f.swap.set("type",Syntax.VariableDeclarator),f.tempStack.pop()):console.log("error"):console.log("error");break;case"init":if(f.isStringLiteral()||f.isNumericLiteral()||f.isRegularExpression())f.swap.set("init",{value:f.current.value,type:f.current.type}),f.stackTopIn(f.swap.hash);else if(f.isKeyWord())switch(f.current.value){case"function":f.swap.set("init",{type:Syntax.FunctionExpression,id:null,defaults:[],params:[],body:[],rest:null,generator:!1,expression:!1}),f.tempStack=["body","params"],f.type=Syntax.FunctionExpression,f.stackIn(f.swap.get("init").params),f.stackTopIn(f.swap.hash)}else f.isPunctuator()?","===f.current.value?(f.swap=new e,f.swap.set("type",Syntax.VariableDeclarator)):";"===f.current.value?(f.stackOut(),f.type=Syntax.Program):console.log("error"):console.log("error")}}function d(){switch(f.tempStack[f.tempStack.length-1]){case"params":f.isIdentifier()?f.stackIn({type:f.current.type,name:f.current.value}):f.isPunctuator()&&")"===f.current.value&&(f.stackOut(),f.tempStack.pop());break;case"body":console.log(f.current)}}var f=this;switch(f.type){case null:a();break;case Syntax.EmptyStatement:break;case Syntax.BlockStatement:break;case Syntax.ExpressionStatement:break;case Syntax.IfStatement:break;case Syntax.LabeledStatement:break;case Syntax.BreakStatement:break;case Syntax.ContinueStatement:break;case Syntax.WithStatement:break;case Syntax.SwitchStatement:break;case Syntax.ReturnStatement:break;case Syntax.ThrowStatement:break;case Syntax.TryStatement:break;case Syntax.WhileStatement:break;case Syntax.DoWhileStatement:break;case Syntax.ForStatement:break;case Syntax.ForInStatement:break;case Syntax.LetStatement:break;case Syntax.DebuggerStatement:break;case Syntax.FunctionDeclaration:break;case Syntax.VariableDeclaration:b();break;case Syntax.VariableDeclarator:c();break;case Syntax.ThisExpression:break;case Syntax.ArrayExpression:break;case Syntax.ObjectExpression:break;case Syntax.FunctionExpression:d();break;case Syntax.ArrowExpression:break;case Syntax.SequenceExpression:break;case Syntax.UnaryExpression:break;case Syntax.BinaryExpression:break;case Syntax.AssignmentExpression:break;case Syntax.UpdateExpression:break;case Syntax.LogicalExpression:break;case Syntax.ConditionalExpression:break;case Syntax.NewExpression:break;case Syntax.CallExpression:break;case Syntax.MemberExpression:break;case Syntax.ObjectPattern:break;case Syntax.ArrayPattern:break;case Syntax.SwitchCase:break;case Syntax.CatchClause:break;case Syntax.Identifier:break;case Syntax.Literal:break;case Syntax.Program:if(f.isKeyWord()){var g;switch(f.current.value){case"if":g=Syntax.IfStatement;break;case"in":break;case"do":break;case"var":g=Syntax.VariableDeclaration;break;case"for":break;case"new":break;case"try":break;case"let":g=Syntax.VariableDeclaration;break;case"this":break;case"else":break;case"case":break;case"void":break;case"with":break;case"enum":break;case"while":break;case"break":g=Syntax.BreakStatement;break;case"catch":break;case"throw":break;case"const":g=Syntax.VariableDeclaration;break;case"yield":break;case"class":break;case"super":break;case"return":break;case"typeof":break;case"delete":break;case"switch":break;case"export":break;case"import":break;case"default":break;case"finally":break;case"extends":break;case"function":g=Syntax.FunctionDeclaration;break;case"continue":break;case"debugger":break;case"instanceof":}f.type=g}else f.isPunctuator()||f.isStringLiteral()||f.isIdentifier()||f.isNumericLiteral()||f.isRegularExpression();f.router()}},isKeyWord:function(){return"Keyword"===this.current.type},isPunctuator:function(){return"Punctuator"===this.current.type},isStringLiteral:function(){return"StringLiteral"===this.current.type},isIdentifier:function(){return"Identifier"===this.current.type},isNumericLiteral:function(){return"NumericLiteral"===this.current.type},isRegularExpression:function(){return"RegularExpression"===this.current.type}},a.version="1.0.3",a.parse=h,a.tokenize=i});
//# sourceMappingURL=bin/passme.map